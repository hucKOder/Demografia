
<div class='container' align="center">
  <h3 class="element">Informácie o meste <%=@town.name%></h3>
</div>

<h4 class="element" align="center" style="padding-top: 20px;">Kategórie</h4>
<div align="center" id='buttons'>
  <%= link_to 'Narodenia', births_index_path(:births => @town.id, :town => @town.name), class: "grow btn btn-primary"%>
  <%= link_to 'Úmrtia', deaths_index_path(:deaths => @town.id, :town => @town.name), class: "grow btn btn-primary"%>
  <%= link_to 'Sobáše', marriages_index_path(:marriages => @town.id , :town => @town.name), class: "grow btn btn-primary"%>
  <%= link_to 'Rozvody', divorces_path(:divorces => @town.id, :town => @town.name), class: "grow btn btn-primary"%>
  <%= link_to 'Migrácia', migrations_path(:migrations => @town.id, :town => @town.name), class: "grow btn btn-primary"%>
</div>

<div class="container">
  <div class="col-sm-6 vcenter">
    <div class="row" align="center">
      <%= image_tag 'https:'+@picture, class: "buttons helper" %>
      <p class="element" id="buttons">Mesto <%=@town.name%></p>
    </div>
    <%@dic.each do |k,v|%>
        <div class="row" align="">
         <div class="element col-sm-6"><%= k %>:</div>
         <div class="col-sm-6"><%= v %></div>
        </div>
    <%end%>
  </div>
  <div class="col-sm-6 vcenter" align="center">
    <div>
      <h3 style="color: #dc3912; background-color: white;">Mesto <%= @town.name%> je spomedzi všetkých miest na <br/>
        <a style="color: blue"><%= link_to @rank[@id].first, years_path("Rok" => {"year" =>@bd_diff.last.first}) %>. mieste</a> vzhľadom na
        rast obyvateľstva za posledný rok!</h3>
    </div>
    <div id="grow" style="width: 600px; height: 400px; margin-bottom: 50px;"></div>
    <div id="map" style='width: 570px; height: 400px;'></div>
  </div>
</div>




<script src="https://maps.google.com/maps/api/js?key=<%= ENV['GOOGLE_MAPS_API_KEY']%>"></script>
<!script src="https://cdn.rawgit.com/mahnuenchik/markerclustererplus/master/dist/markerclusterer.min.js"><!/script>
<script src='https://cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js' type='text/javascript'></script>
<script src='https://cdn.rawgit.com/googlemaps/js-marker-clusterer/gh-pages/src/markerclusterer.js' type='text/javascript'></script>
<script type="text/javascript" charset="utf-8">


    google.charts.load('current', {'packages':['corechart']});
    google.charts.setOnLoadCallback(drawChartMale);

    function drawChartMale() {
        var myJsArray = <%=raw @bd_diff%>;
        var data = google.visualization.arrayToDataTable(myJsArray);
        var options = {
            title: 'Rozdiel medzi počtu obyvateľov mesta vzhľadom na narodenia, úmrtia a migráciu',
            curveType: 'function',
            legend: { position: 'bottom' }
        };
        var chart = new google.visualization.LineChart(document.getElementById('grow'));
        chart.draw(data, options);
    }


    $(function () {
        handler = Gmaps.build('Google');
        handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
            markers = handler.addMarkers(<%= raw @hash.to_json%>);
            handler.bounds.extendWith(markers);
            handler.fitMapToBounds();
            handler.getMap().setZoom(12);
        });
    });

</script>


